---
// Cookie Consent Component for GDPR compliance
---

<div id="cookie-consent" class="cookie-banner">
  <div class="cookie-content">
    <div class="cookie-text">
      <h3>Cookies & Privacy</h3>
      <p>
        This website uses cookies to ensure you get the best experience on our site. 
        We use essential cookies for basic functionality and analytics cookies to understand how you use our site.
      </p>
    </div>
    <div class="cookie-buttons">
      <button id="cookie-accept-all" class="cookie-btn cookie-btn-primary">Accept All</button>
      <button id="cookie-settings" class="cookie-btn cookie-btn-secondary">Cookie Settings</button>
      <button id="cookie-reject" class="cookie-btn cookie-btn-secondary">Reject Non-Essential</button>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal -->
<div id="cookie-modal" class="cookie-modal">
  <div class="cookie-modal-content">
    <div class="cookie-modal-header">
      <h3>Cookie Settings</h3>
      <button id="cookie-modal-close" class="cookie-modal-close">&times;</button>
    </div>
    <div class="cookie-modal-body">
      <div class="cookie-setting-item">
        <div>
          <h4>Essential Cookies</h4>
          <p>These cookies are necessary for the website to function and cannot be switched off.</p>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" checked disabled>
          <span class="cookie-slider"></span>
        </label>
      </div>
      
      <div class="cookie-setting-item">
        <div>
          <h4>Analytics Cookies</h4>
          <p>These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site.</p>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" id="analytics-cookies">
          <span class="cookie-slider"></span>
        </label>
      </div>
      
      <div class="cookie-setting-item">
        <div>
          <h4>Marketing Cookies</h4>
          <p>These cookies may be set through our site by our advertising partners to build a profile of your interests.</p>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" id="marketing-cookies">
          <span class="cookie-slider"></span>
        </label>
      </div>
    </div>
    <div class="cookie-modal-footer">
      <button id="cookie-save-preferences" class="cookie-btn cookie-btn-primary">Save Preferences</button>
    </div>
  </div>
</div>

<style>
  /* Cookie Banner Styles */
  .cookie-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: white;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    border-top: 1px solid #e5e7eb;
    display: none;
  }
  
  .cookie-content {
    max-width: 1280px;
    margin: 0 auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
  }
  
  .cookie-text h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-top: 0;
    margin-bottom: 0.5rem;
    color: #1f2937;
  }
  
  .cookie-text p {
    font-size: 0.875rem;
    line-height: 1.5;
    color: #4b5563;
    margin-bottom: 1rem;
  }
  
  .cookie-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .cookie-btn {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: background-color 0.2s;
    border: none;
  }
  
  .cookie-btn-primary {
    background-color: #4a7c59;
    color: white;
  }
  
  .cookie-btn-primary:hover {
    background-color: #3d6449;
  }
  
  .cookie-btn-secondary {
    background-color: #f3f4f6;
    color: #1f2937;
    border: 1px solid #d1d5db;
  }
  
  .cookie-btn-secondary:hover {
    background-color: #e5e7eb;
  }
  
  /* Cookie Modal Styles */
  .cookie-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }
  
  .cookie-modal-content {
    background-color: white;
    border-radius: 0.5rem;
    width: 100%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  
  .cookie-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .cookie-modal-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0;
    color: #1f2937;
  }
  
  .cookie-modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #6b7280;
  }
  
  .cookie-modal-body {
    padding: 1rem;
  }
  
  .cookie-setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid #f3f4f6;
  }
  
  .cookie-setting-item:last-child {
    border-bottom: none;
  }
  
  .cookie-setting-item h4 {
    font-size: 1rem;
    font-weight: 500;
    margin: 0 0 0.25rem 0;
    color: #1f2937;
  }
  
  .cookie-setting-item p {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0;
    max-width: 400px;
  }
  
  .cookie-modal-footer {
    padding: 1rem;
    text-align: right;
    border-top: 1px solid #e5e7eb;
  }
  
  /* Switch Toggle */
  .cookie-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
    flex-shrink: 0;
  }
  
  .cookie-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  
  .cookie-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
  }
  
  .cookie-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  
  input:checked + .cookie-slider {
    background-color: #4a7c59;
  }
  
  input:checked + .cookie-slider:before {
    transform: translateX(26px);
  }
  
  /* Responsive styles */
  @media (min-width: 768px) {
    .cookie-content {
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
    }
    
    .cookie-text {
      max-width: 70%;
    }
    
    .cookie-buttons {
      justify-content: flex-end;
    }
    
    .cookie-text p {
      margin-bottom: 0;
    }
  }
  
  @media (max-width: 640px) {
    .cookie-setting-item {
      flex-direction: column;
      align-items: flex-start;
    }
    
    .cookie-switch {
      margin-top: 0.5rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const cookieBanner = document.getElementById('cookie-consent');
    const cookieModal = document.getElementById('cookie-modal');
    const acceptAllBtn = document.getElementById('cookie-accept-all');
    const cookieSettingsBtn = document.getElementById('cookie-settings');
    const rejectBtn = document.getElementById('cookie-reject');
    const modalCloseBtn = document.getElementById('cookie-modal-close');
    const savePreferencesBtn = document.getElementById('cookie-save-preferences');
    const analyticsCheckbox = document.getElementById('analytics-cookies');
    const marketingCheckbox = document.getElementById('marketing-cookies');
    
    // Check if user has already made a choice
    const cookieConsent = localStorage.getItem('cookie-consent');
    
    if (!cookieConsent) {
      // Show the banner if no choice has been made
      cookieBanner.style.display = 'block';
    } else {
      // If user has consented, apply their saved preferences
      const preferences = JSON.parse(cookieConsent);
      
      if (preferences.analytics) {
        // Enable analytics cookies
        enableAnalytics();
      }
      
      if (preferences.marketing) {
        // Enable marketing cookies
        enableMarketing();
      }
    }
    
    // Accept all cookies
    acceptAllBtn.addEventListener('click', () => {
      setConsent(true, true);
      cookieBanner.style.display = 'none';
    });
    
    // Reject non-essential cookies
    rejectBtn.addEventListener('click', () => {
      setConsent(false, false);
      cookieBanner.style.display = 'none';
    });
    
    // Open settings modal
    cookieSettingsBtn.addEventListener('click', () => {
      // Set checkboxes based on saved preferences
      const savedPreferences = JSON.parse(localStorage.getItem('cookie-consent') || '{"analytics":false,"marketing":false}');
      analyticsCheckbox.checked = savedPreferences.analytics;
      marketingCheckbox.checked = savedPreferences.marketing;
      
      cookieModal.style.display = 'flex';
    });
    
    // Close modal
    modalCloseBtn.addEventListener('click', () => {
      cookieModal.style.display = 'none';
    });
    
    // Save preferences
    savePreferencesBtn.addEventListener('click', () => {
      setConsent(
        analyticsCheckbox.checked,
        marketingCheckbox.checked
      );
      cookieModal.style.display = 'none';
      cookieBanner.style.display = 'none';
    });
    
    // Close modal if clicking outside
    cookieModal.addEventListener('click', (e) => {
      if (e.target === cookieModal) {
        cookieModal.style.display = 'none';
      }
    });
    
    // Function to set consent preferences
    function setConsent(analyticsAllowed, marketingAllowed) {
      const preferences = {
        essential: true, // Always required
        analytics: analyticsAllowed,
        marketing: marketingAllowed
      };
      
      localStorage.setItem('cookie-consent', JSON.stringify(preferences));
      
      // Apply the preferences
      if (analyticsAllowed) {
        enableAnalytics();
      }
      
      if (marketingAllowed) {
        enableMarketing();
      }
    }
    
    // Function to enable analytics cookies
    function enableAnalytics() {
      // This is where you would initialize your analytics services
      // For example, Google Analytics or similar
      console.log('Analytics cookies enabled');
    }
    
    // Function to enable marketing cookies
    function enableMarketing() {
      // This is where you would initialize marketing/advertising cookies
      // For example, Facebook Pixel, Google Ads, etc.
      console.log('Marketing cookies enabled');
    }
  });
</script> 